(function(e){function t(t){for(var n,a,s=t[0],u=t[1],l=t[2],d=0,f=[];d<s.length;d++)a=s[d],o[a]&&f.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);c&&c(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var u=r[s];0!==o[u]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/youtrack-time-sync/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;i.push([1,"chunk-vendors"]),r()})({0:function(e,t){},1:function(e,t,r){e.exports=r("cd49")},2:function(e,t){},"2fb4":function(e,t,r){},3:function(e,t){},"6ee4":function(e,t,r){"use strict";var n=r("2fb4"),o=r.n(n);o.a},9224:function(e){e.exports={name:"youtrack-time-sync",author:{name:"Andreas Huber Dönni"},keywords:["youtrack","time-sync"],description:"Sync spent time entries in youtrack according to the working time you keep in an Excel sheet.",homepage:"https://github.com/andreashuber69/youtrack-time-sync/blob/master/README.md#--",version:"0.1.12",license:"GPL-3.0-or-later",repository:{type:"git",url:"https://github.com/andreashuber69/youtrack-time-sync.git"},bugs:{url:"https://github.com/andreashuber69/youtrack-time-sync/issues"},private:!0,scripts:{"serve-development":"vue-cli-service serve --mode development","preserve-production":"npm run lint","serve-production":"vue-cli-service serve --mode production",prebuild:"npm run lint",build:"cross-env WEBPACK_BASE_URL=/youtrack-time-sync vue-cli-service build",lint:"tslint --project tsconfig.json --config tslint.json --format verbose",test:"npm run build"},dependencies:{vue:"^2.5.17","vue-class-component":"^6.0.0","vue-property-decorator":"^7.0.0",vuetify:"^1.3.0",xlsx:"^0.14.0"},devDependencies:{"@vue/cli-plugin-typescript":"^3.1.1","@vue/cli-service":"^3.1.1","cross-env":"^5.2.0",stylus:"^0.54.5","stylus-loader":"^3.0.1",typescript:"^3.0.0","vue-cli-plugin-vuetify":"^0.4.5","vue-template-compiler":"^2.5.17","vuetify-loader":"^1.0.5"},postcss:{plugins:{autoprefixer:{}}},browserslist:[">= 0%","not Chrome < 54","not ChromeAndroid < 54","not Android < 5","not Firefox < 47","not FirefoxAndroid < 47","not Edge < 14","not Safari < 10","not iOS < 10","not Opera < 41","not OperaMini all","not Samsung < 5","not Explorer < 12","not ExplorerMobile < 12","not Baidu < 8","not QQAndroid < 2","not UCAndroid < 12","not dead"]}},b318:function(e,t,r){"use strict";var n=r("e8f4"),o=r.n(n);o.a},cd49:function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-navigation-drawer",{attrs:{app:"",dark:"",temporary:""},model:{value:e.isDrawerVisible,callback:function(t){e.isDrawerVisible=t},expression:"isDrawerVisible"}},[r("v-list",{attrs:{dense:""}},[r("v-list-tile",{on:{click:e.onAboutClicked}},[r("v-list-tile-action",[r("v-icon",[e._v("help")])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("About")])],1)],1)],1)],1),r("v-toolbar",{attrs:{app:"",dark:""}},[r("v-toolbar-side-icon",{on:{click:function(t){return t.stopPropagation(),e.onMenuClicked(t)}}}),r("v-toolbar-title",{staticClass:"hidden-xs-only"},[r("v-icon",[e._v("sync")]),e._v("  "+e._s(e.model.title))],1),r("v-spacer")],1),r("v-content",[r("Content",{attrs:{model:e.model}}),r("AboutDialog",{ref:"aboutDialog"})],1)],1)},i=[],a=r("9ab4"),s=r("60a3"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"960px"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),r("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{flat:""}},[r("v-card-text",{staticClass:"subheading px-0"},[e._v("Copyright © 2018 Andreas Huber Dönni")])],1)],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-btn",{staticClass:"ma-0",attrs:{href:"https://github.com/andreashuber69/"+e.packageName+"/blob/master/README.md#--",target:"_blank",color:"primary",block:"",flat:""}},[e._v("\n            Documentation\n          ")])],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-btn",{staticClass:"ma-0",attrs:{href:"https://github.com/andreashuber69/"+e.packageName+"/issues",target:"_blank",color:"primary",block:"",flat:""}},[e._v("\n            Issues\n          ")])],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-btn",{staticClass:"ma-0",attrs:{href:"https://raw.githubusercontent.com/andreashuber69/"+e.packageName+"/master/LICENSE",target:"_blank",color:"primary",block:"",flat:""}},[e._v("\n            License\n          ")])],1),r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{flat:""}},[r("v-card-text",{staticClass:"caption px-0"},[e._v(e._s(e.userAgent))])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.isOpen=!1}}},[e._v("Close")])],1)],1)],1)},l=[],c=r("9224"),d=function(){function e(){}return Object.defineProperty(e,"packageName",{get:function(){return c.name},enumerable:!0,configurable:!0}),Object.defineProperty(e,"title",{get:function(){return this.packageName.split("-").map(function(e){return""+e[0].toUpperCase()+e.substr(1)}).join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return c.version},enumerable:!0,configurable:!0}),e}(),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isOpen=!1,t}return a["c"](t,e),Object.defineProperty(t.prototype,"title",{get:function(){return d.title+" v"+d.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return d.packageName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userAgent",{get:function(){return window.navigator.userAgent},enumerable:!0,configurable:!0}),t.prototype.showDialog=function(){this.isOpen=!0},t=a["b"]([s["a"]],t),t}(s["c"]),p=f,h=p,m=(r("6ee4"),r("2877")),v=r("6544"),y=r.n(v),b=r("8336"),g=r("b0af"),w=r("99d9"),x=r("12b2"),k=r("a523"),E=r("169a"),T=r("0e8f"),C=r("a722"),_=r("9910"),S=Object(m["a"])(h,u,l,!1,null,"1e2a732e",null);S.options.__file="AboutDialog.vue";var P=S.exports;y()(S,{VBtn:b["a"],VCard:g["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:x["a"],VContainer:k["a"],VDialog:E["a"],VFlex:T["a"],VLayout:C["a"],VSpacer:_["a"]});var A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"YouTrack Base URL",hint:"Example: 'https://company.myjetbrains.com",required:"",rules:e.rules,"error-messages":e.networkError},model:{value:e.model.youTrackBaseUrl,callback:function(t){e.$set(e.model,"youTrackBaseUrl",t)},expression:"model.youTrackBaseUrl"}})],1),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"YouTrack Authentication Token",hint:"Example: 'perm:QUhV.VGVzdDI=.6fRv9xZztORX9LquKaXJHxf5lsKyoO'",required:"",rules:e.rules,"error-messages":e.networkError,"append-icon":e.showToken?"visibility_off":"visibility",type:e.showToken?"text":"password"},on:{"click:append":function(t){e.showToken=!e.showToken}},model:{value:e.model.token,callback:function(t){e.$set(e.model,"token",t)},expression:"model.token"}})],1),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Excel File",required:"",readonly:"",rules:e.rules,"error-messages":e.fileError,"append-icon":"open_in_browser"},on:{"click:append":e.onOpenClicked},model:{value:e.model.filename,callback:function(t){e.$set(e.model,"filename",t)},expression:"model.filename"}}),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:e.model.fileExtension},on:{change:e.onFileInputChanged}})],1)],1)],1),r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.timeHeaders,items:e.times,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.date.toLocaleDateString()))]),r("td",[e._v(e._s(t.item.title))]),r("td",{staticStyle:{"max-width":"300px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[e._v("\n            "+e._s(t.item.summary)+"\n          ")]),r("td",[e._v(e._s(t.item.type))]),r("td",{staticStyle:{"max-width":"200px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[e._v("\n            "+e._s(t.item.comment)+"\n          ")]),r("td",{staticClass:"text-xs-right"},[e._v(e._s((t.item.durationMinutes/60).toFixed(2)))])]}}])})],1)],1),r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{attrs:{disabled:!e.valid},on:{click:e.onSubmitClicked}},[e._v("Submit")])],1)],1)],1)},D=[],O=r("1146"),V=function(){function e(e,t){var r,n,o,i;this.roundingMinutes=t,this.map=new Map;try{for(var s=a["g"](e),u=s.next();!u.done;u=s.next()){var l=u.value;this.addSingle(l)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}try{for(var c=a["g"](this.map.values()),d=c.next();!d.done;d=c.next()){l=d.value;this.roundDuration(l)}}catch(p){o={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}}return e.prototype.uniqueTitles=function(){return a["f"](new Set(a["f"](this.map.values()).map(function(e){return e.title})))},e.prototype.subtract=function(e){var t,r;try{for(var n=a["g"](e),o=n.next();!o.done;o=n.next()){var i=o.value;this.subtractSingle(i)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.entries=function(){var t,r,n=new Array;try{for(var o=a["g"](this.map.values()),i=o.next();!i.done;i=o.next()){var s=i.value;n.push(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n.sort(function(t,r){return e.compare(t,r)}),n},e.compare=function(e,t){return e.date.getTime()-t.date.getTime()||e.title.localeCompare(t.title)||(e.type||"").localeCompare(t.type||"")||0},e.prototype.addSingle=function(e){var t=a["e"](this.findExisting(e),2),r=t[0],n=t[1];n?(n.durationMinutes+=e.durationMinutes,n.comment=n.comment?n.comment+"\n"+e.comment:e.comment):this.map.set(r,e)},e.prototype.subtractSingle=function(e){var t=a["e"](this.findExisting(e),2),r=t[0],n=t[1];if(this.roundDuration(e),!n||n.durationMinutes<e.durationMinutes){var o=e.date.toLocaleDateString();throw new Error("Spent time entries for issue "+e.title+" on "+o+" cannot be matched to the Excel sheet.")}n.durationMinutes-=e.durationMinutes,0===n.durationMinutes&&this.map.delete(r)},e.prototype.findExisting=function(e){var t=e.date.getTime()+"|"+e.title+"|"+e.type;return[t,this.map.get(t)]},e.prototype.roundDuration=function(e){e.durationMinutes=Math.round(e.durationMinutes/this.roundingMinutes)*this.roundingMinutes},e}(),I=function(){function e(){}return e.parse=function(e){var t,r,n,o,i,s,u,l,c,d,f,p,h;return a["d"](this,function(m){switch(m.label){case 0:i=!1,m.label=1;case 1:m.trys.push([1,12,13,14]),s=a["g"](e.SheetNames),u=s.next(),m.label=2;case 2:if(u.done)return[3,11];l=u.value,m.label=3;case 3:m.trys.push([3,8,9,10]),c=a["g"](this.parseSheet(e.Sheets[l],l)),d=c.next(),m.label=4;case 4:return d.done?[3,7]:(f=d.value,i=!0,[4,f]);case 5:m.sent(),m.label=6;case 6:return d=c.next(),[3,4];case 7:return[3,10];case 8:return p=m.sent(),n={error:p},[3,10];case 9:try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}return[7];case 10:return u=s.next(),[3,2];case 11:return[3,14];case 12:return h=m.sent(),t={error:h},[3,14];case 13:try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}return[7];case 14:if(!i)throw new Error("The selected workbook does not seem to contain any Week sheets.");return[2]}})},e.parseSheet=function(e,t){var r,n,o,i,s,u,l,c,d,f,p,h,m,v,y;return a["d"](this,function(b){switch(b.label){case 0:if(!t.startsWith("Week"))return[3,8];if(o=e["!ref"],!o)throw new Error("The sheet "+t+" seems to be empty.");i=o.indexOf(":"),this.checkRange(i<0,t,o),s=a["e"](this.split(o.substring(0,i),t,o),2),u=s[0],l=s[1],c=a["e"](this.split(o.substring(i+1,o.length),t,o),2),d=c[0],f=c[1],p=5,this.checkRange("A"!==u||"G"!==d||1!==l||f<p,t,o),b.label=1;case 1:b.trys.push([1,6,7,8]),h=a["g"](this.iterateRows(p,f,t,e)),m=h.next(),b.label=2;case 2:return m.done?[3,5]:(v=m.value,[4,v]);case 3:b.sent(),b.label=4;case 4:return m=h.next(),[3,2];case 5:return[3,8];case 6:return y=b.sent(),r={error:y},[3,8];case 7:try{m&&!m.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}return[7];case 8:return[2]}})},e.checkRange=function(e,t,r){if(e)throw new Error("The sheet "+t+" has an unexpected range: "+r+".")},e.iterateRows=function(e,t,r,n){var o,i;return a["d"](this,function(a){switch(a.label){case 0:o=e,a.label=1;case 1:return o<=t?(i=this.parseRow({errorPrefix:"In sheet "+r+", ",row:o,holidays:n["A"+o],otherPaidAbsence:n["B"+o],start:n["C"+o],end:n["D"+o],title:n["E"+o],type:n["F"+o],comment:n["G"+o]}),i?[4,i]:[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return++o,[3,1];case 4:return[2]}})},e.parseRow=function(e){var t=this.getPeriod(e);if(t){var r=a["e"](t,2),n=r[0],o=r[1],i=this.getSpentTime(o,n,e),s=a["e"](this.getWorkDetail(e,n,o),2),u=s[0],l=s[1];if(void 0===n.f){if(!l)throw new Error(e.errorPrefix+"E"+e.row+" must not be empty.");if(l.includes("-"))return{date:this.toDate(n.v),title:l,type:e.type&&e.type.v.toString()||void 0,comment:e.comment&&e.comment.v.toString()||void 0,isPaidAbsence:u,durationMinutes:24*i*60}}}},e.split=function(e,t,r){var n=e.search("[0-9]+");return this.checkRange(n<0,t,r),[e.substring(0,n),Number.parseInt(e.substring(n,e.length),10)]},e.getPeriod=function(e){if(!e.start!==!e.end)throw new Error(e.errorPrefix+"C"+e.row+" and D"+e.row+" must either be both empty or non-empty.");if(e.start&&e.end){if("number"!==typeof e.start.v||"number"!==typeof e.end.v)throw new Error(e.errorPrefix+"C"+e.row+" and D"+e.row+" must both be dates.");return[{v:e.start.v,f:e.start.f},{v:e.end.v,f:e.end.f}]}},e.getSpentTime=function(e,t,r){var n=e.v-t.v;if(n<0)throw new Error(r.errorPrefix+"C"+r.row+" must be smaller than D"+r.row+".");if(n>=1)throw new Error(r.errorPrefix+"on row "+r.row+" the spent time must be smaller than 1 day.");return n},e.getWorkDetail=function(e,t,r){if(e.holidays&&e.otherPaidAbsence)throw new Error(e.errorPrefix+"A"+e.row+" and B"+e.row+" cannot both be non-empty.");var n=!!e.holidays||!!e.otherPaidAbsence;if(n){if(void 0!==t.f||void 0===r.f)throw new Error(e.errorPrefix+"C"+e.row+" must be fixed and D"+e.row+" must be floating.");return[n,e.holidays?"Holiday":"Other Paid Absence"]}if(void 0===t.f!==(void 0===r.f))throw new Error(e.errorPrefix+"C"+e.row+" and D"+e.row+" must either be both values or both formulas.");return[n,e.title&&e.title.v&&e.title.v.toString()||void 0]},e.toDate=function(e){return new Date(24*Math.floor(this.excelEpochStart.getTime()/1e3/60/60/24+e)*60*60*1e3)},e.excelEpochStart=new Date(1899,11,30),e}(),M=function(){function e(){}return e.getUnreportedSpentTime=function(e,t,r){return a["a"](this,void 0,void 0,function(){var n,o,i,s,u,l,c;return a["d"](this,function(a){switch(a.label){case 0:r.fileError=null,a.label=1;case 1:return a.trys.push([1,3,,4]),s=(i=I).parse,u=O["read"],l=Uint8Array.bind,[4,this.read(e)];case 2:return o=s.apply(i,[u.apply(void 0,[new(l.apply(Uint8Array,[void 0,a.sent()])),{type:"array"}])]),n=new V(o,15),[3,4];case 3:return c=a.sent(),r.fileError=this.getErrorMessage(c),[2,[]];case 4:return[2,this.subtractYouTrackSpentTimes(n,t,r)]}})})},e.subtractYouTrackSpentTimes=function(e,t,r){return a["a"](this,void 0,void 0,function(){var n,o,i,s,u,l,c,d,f,p,h,m,v;return a["d"](this,function(y){switch(y.label){case 0:r.networkError=null,y.label=1;case 1:return y.trys.push([1,5,,6]),s=e.uniqueTitles(),c=(l=t).getWorkItemsForUser,[4,t.getCurrentUser()];case 2:return[4,c.apply(l,[y.sent(),s])];case 3:return u=y.sent(),e.subtract(this.convert(u.values())),[4,t.getIssues(e.uniqueTitles())];case 4:return i=y.sent(),[3,6];case 5:return d=y.sent(),r.networkError=this.getErrorMessage(d),[2,[]];case 6:f=e.entries(),p=function(e){var t=i.find(function(t){return t.id===e.title});e.summary=t&&t.summary};try{for(h=a["g"](f),m=h.next();!m.done;m=h.next())v=m.value,p(v)}catch(b){n={error:b}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}return[2,f]}})})},e.convert=function(e){var t,r,n,o,i,s;return a["d"](this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),n=a["g"](e),o=n.next(),u.label=1;case 1:return o.done?[3,4]:(i=o.value,[4,{date:new Date(i.date),title:i.issue.id,type:i.type&&i.type.name||void 0,isPaidAbsence:!1,comment:i.text,durationMinutes:i.duration.minutes}]);case 2:u.sent(),u.label=3;case 3:return o=n.next(),[3,1];case 4:return[3,7];case 5:return s=u.sent(),t={error:s},[3,7];case 6:try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}return[7];case 7:return[2]}})},e.read=function(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(e){return t(n.result)},n.onerror=function(e){return r("Unable to read file.")},n.readAsArrayBuffer(e)})},e.getErrorMessage=function(e){return e instanceof Error&&e.toString()||"Unknown Error!"},e}(),j=function(){function e(e,t){this.baseUrl=e,this.authenticationToken=t,this.headersInit=new Headers([["Accept","application/json"],["Authorization","Bearer "+this.authenticationToken],["Cache-Control","no-cache"],["Content-Type","application/json"]])}return e.prototype.getCurrentUser=function(){return this.get("youtrack/api/admin/users/me")},e.prototype.getIssue=function(e){return a["a"](this,void 0,void 0,function(){var t,r;return a["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.get("youtrack/api/issues/"+e,[["fields","id,summary"]])];case 1:return t=n.sent(),t.id=e,[2,t];case 2:throw r=n.sent(),new Error('Failed to get issue id "'+e+'": '+(r instanceof Error&&r.message||r));case 3:return[2]}})})},e.prototype.getIssues=function(e){var t=this;return Promise.all(a["f"](e).map(function(e){return t.getIssue(e)}))},e.prototype.getWorkItems=function(t){return a["a"](this,void 0,void 0,function(){var r,n,o,i,s,u,l;return a["d"](this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.get(e.getWorkItemsPath(t),e.workItemsParams)];case 1:return o=c.sent(),[3,3];case 2:throw i=c.sent(),new Error('Failed to get work items for issue id "'+t+'": '+(i instanceof Error&&i.message||i));case 3:try{for(s=a["g"](o),u=s.next();!u.done;u=s.next())l=u.value,l.issue.id=t}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[2,o]}})})},e.prototype.getWorkItemsForUser=function(e,t){return a["a"](this,void 0,void 0,function(){var r,n,o=this;return a["d"](this,function(i){switch(i.label){case 0:return[4,Promise.all(a["f"](t).map(function(e){return o.getWorkItems(e)}))];case 1:return n=i.sent(),[2,(r=new Array).concat.apply(r,a["f"](n)).filter(function(t){return t.creator.id===e.id})]}})})},e.prototype.createWorkItem=function(t,r){return this.post(e.getWorkItemsPath(t),void 0,JSON.stringify(r))},e.getWorkItemsPath=function(e){return"youtrack/api/issues/"+e+"/timeTracking/workItems"},e.prototype.get=function(e,t){return this.fetch(e,"GET",t)},e.prototype.post=function(e,t,r){return this.fetch(e,"POST",t,r)},e.prototype.fetch=function(e,t,r,n){return a["a"](this,void 0,void 0,function(){var o,i,s,u,l,c,d,f,p,h,m,v;return a["d"](this,function(y){switch(y.label){case 0:if(u=new URL(e,this.baseUrl),r)try{for(l=a["g"](r),c=l.next();!c.done;c=l.next())d=c.value,u.searchParams.append(d[0],d[1])}catch(b){o={error:b}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}y.label=1;case 1:return y.trys.push([1,3,,4]),[4,window.fetch(u.href,this.getInit(t,n))];case 2:return s=y.sent(),[3,4];case 3:throw f=y.sent(),new Error("Network Error: "+f);case 4:if(!s.ok)throw new Error("Response Status: "+s.status+" "+s.statusText);y.label=5;case 5:return y.trys.push([5,7,,8]),m=(h=JSON).parse,[4,s.text()];case 6:return p=m.apply(h,[y.sent()]),[3,8];case 7:throw v=y.sent(),new Error("Parse Failure: "+v);case 8:if(null===p)throw new Error("Unexpected null response.");return[2,p]}})})},e.prototype.getInit=function(e,t){return{method:e,headers:this.headersInit,body:JSON.stringify(t),mode:"cors"}},e.workItemsParams=[["fields","creator(id),date,duration(minutes),issue(id),text,type(name)"]],e}(),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.valid=!1,t.rules=[function(e){return r.requiredRule(e)}],t.networkError=null,t.showToken=!1,t.fileError=null,t.timeHeaders=[{text:"Date",sortable:!1},{text:"ID",sortable:!1},{text:"Summary",sortable:!1},{text:"Type",sortable:!1},{text:"Comment",sortable:!1},{text:"Spent Time (Hours)",align:"right",sortable:!1}],t.times=new Array,t}var r;return a["c"](t,e),r=t,t.prototype.onOpenClicked=function(e){this.fileInput.click()},t.prototype.onFileInputChanged=function(e){return a["a"](this,void 0,void 0,function(){var t;return a["d"](this,function(r){switch(r.label){case 0:return r.trys.push([0,,2,3]),t=this,[4,this.onFileInputChangedImpl(e.target.files)];case 1:return t.times=r.sent(),[3,3];case 2:return this.fileInput.value="",[7];case 3:return[2]}})})},t.prototype.onSubmitClicked=function(e){return a["a"](this,void 0,void 0,function(){var e,t,r,n,o,i,s;return a["d"](this,function(u){switch(u.label){case 0:if(!this.youTrack)throw new Error("youTrack is not set.");u.label=1;case 1:u.trys.push([1,6,7,8]),r=a["g"](this.times),n=r.next(),u.label=2;case 2:return n.done?[3,5]:(o=n.value,[4,this.youTrack.createWorkItem(o.title,{date:o.date.getTime(),duration:{minutes:o.durationMinutes},text:o.comment||void 0,type:o.type&&{name:o.type}||void 0})]);case 3:i=u.sent(),i.toString(),u.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),e={error:s},[3,8];case 7:try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}return[7];case 8:return[2]}})})},t.requiredRule=function(e){return!!e||"A value is required."},Object.defineProperty(t.prototype,"checkedModel",{get:function(){if(!this.model)throw new Error("No model set!");return this.model},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileInput",{get:function(){return this.$refs.fileInput},enumerable:!0,configurable:!0}),t.prototype.onFileInputChangedImpl=function(e){return a["a"](this,void 0,void 0,function(){return a["d"](this,function(t){return 1!==e.length?[2,[]]:(this.checkedModel.filename=e[0].name,this.checkedModel.youTrackBaseUrl&&this.checkedModel.token?(this.youTrack=new j(this.checkedModel.youTrackBaseUrl,this.checkedModel.token),[2,M.getUnreportedSpentTime(e[0],this.youTrack,this)]):[2,[]])})})},a["b"]([Object(s["b"])()],t.prototype,"model",void 0),t=r=a["b"]([s["a"]],t),t}(s["c"]),F=U,R=F,B=(r("b318"),r("8fea")),L=r("4bd4"),N=r("2677"),W=Object(m["a"])(R,A,D,!1,null,null,null);W.options.__file="Content.vue";var q=W.exports;y()(W,{VBtn:b["a"],VContainer:k["a"],VDataTable:B["a"],VFlex:T["a"],VForm:L["a"],VLayout:C["a"],VTextField:N["a"]});var $=function(){function e(){this.fileExtension=".xlsm",this.youTrackBaseUrl=null,this.token=null,this.filename=null}return Object.defineProperty(e.prototype,"title",{get:function(){return d.title},enumerable:!0,configurable:!0}),e}(),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDrawerVisible=!1,t.model=new $,t}return a["c"](t,e),t.prototype.onMenuClicked=function(e){this.isDrawerVisible=!this.isDrawerVisible},t.prototype.onAboutClicked=function(e){this.isDrawerVisible=!1,this.$refs.aboutDialog.showDialog()},t=a["b"]([Object(s["a"])({components:{AboutDialog:P,Content:q}})],t),t}(s["c"]),J=H,G=J,Y=r("7496"),z=r("549c"),K=r("132d"),Q=r("8860"),X=r("ba95"),Z=r("40fe"),ee=r("5d23"),te=r("f774"),re=r("71d9"),ne=r("706c"),oe=r("2a7f"),ie=Object(m["a"])(G,o,i,!1,null,null,null);ie.options.__file="App.vue";var ae=ie.exports;y()(ie,{VApp:Y["a"],VContent:z["a"],VIcon:K["a"],VList:Q["a"],VListTile:X["a"],VListTileAction:Z["a"],VListTileContent:ee["a"],VListTileTitle:ee["b"],VNavigationDrawer:te["a"],VSpacer:_["a"],VToolbar:re["a"],VToolbarSideIcon:ne["a"],VToolbarTitle:oe["a"]});var se=r("bb71");r("da64");n["default"].use(se["a"],{iconfont:"md"}),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(ae)}}).$mount("#app")},e8f4:function(e,t,r){}});
//# sourceMappingURL=app.6795fc9d.js.map