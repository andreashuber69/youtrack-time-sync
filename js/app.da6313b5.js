(function(e){function t(t){for(var n,a,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)a=s[d],o[a]&&f.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/youtrack-time-sync/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([1,"chunk-vendors"]),r()})({0:function(e,t){},1:function(e,t,r){e.exports=r("cd49")},2:function(e,t){},"2fb4":function(e,t,r){},3:function(e,t){},"6ee4":function(e,t,r){"use strict";var n=r("2fb4"),o=r.n(n);o.a},9224:function(e){e.exports={name:"youtrack-time-sync",author:{name:"Andreas Huber Dönni"},keywords:["youtrack","time-sync"],description:"Sync spent time entries in youtrack according to the working time you keep in an Excel file.",homepage:"https://github.com/andreashuber69/youtrack-time-sync/blob/master/README.md#--",version:"0.1.13",license:"GPL-3.0-or-later",repository:{type:"git",url:"https://github.com/andreashuber69/youtrack-time-sync.git"},bugs:{url:"https://github.com/andreashuber69/youtrack-time-sync/issues"},private:!0,scripts:{"serve-development":"vue-cli-service serve --mode development","preserve-production":"npm run lint","serve-production":"vue-cli-service serve --mode production",prebuild:"npm run lint",build:"cross-env WEBPACK_BASE_URL=/youtrack-time-sync vue-cli-service build",lint:"tslint --project tsconfig.json --config tslint.json --format verbose",test:"npm run build"},dependencies:{vue:"^2.5.17","vue-class-component":"^6.0.0","vue-property-decorator":"^7.0.0",vuetify:"^1.3.0",xlsx:"^0.14.0"},devDependencies:{"@vue/cli-plugin-typescript":"^3.1.1","@vue/cli-service":"^3.1.1","cross-env":"^5.2.0",stylus:"^0.54.5","stylus-loader":"^3.0.1",typescript:"^3.0.0","vue-cli-plugin-vuetify":"^0.4.5","vue-template-compiler":"^2.5.17","vuetify-loader":"^1.0.5"},postcss:{plugins:{autoprefixer:{}}},browserslist:[">= 0%","not Chrome < 54","not ChromeAndroid < 54","not Android < 5","not Firefox < 47","not FirefoxAndroid < 47","not Edge < 14","not Safari < 10","not iOS < 10","not Opera < 41","not OperaMini all","not Samsung < 5","not Explorer < 12","not ExplorerMobile < 12","not Baidu < 8","not QQAndroid < 2","not UCAndroid < 12","not dead"]}},b318:function(e,t,r){"use strict";var n=r("e8f4"),o=r.n(n);o.a},cd49:function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-navigation-drawer",{attrs:{app:"",dark:"",temporary:""},model:{value:e.isDrawerVisible,callback:function(t){e.isDrawerVisible=t},expression:"isDrawerVisible"}},[r("v-list",{attrs:{dense:""}},[r("v-list-tile",{on:{click:e.onAboutClicked}},[r("v-list-tile-action",[r("v-icon",[e._v("help")])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("About")])],1)],1)],1)],1),r("v-toolbar",{attrs:{app:"",dark:""}},[r("v-toolbar-side-icon",{on:{click:function(t){return t.stopPropagation(),e.onMenuClicked(t)}}}),r("v-toolbar-title",{staticClass:"hidden-xs-only"},[r("v-icon",[e._v("sync")]),e._v("  "+e._s(e.model.title))],1),r("v-spacer")],1),r("v-content",[r("Content",{attrs:{model:e.model}}),r("AboutDialog",{ref:"aboutDialog"})],1)],1)},i=[],a=r("9ab4"),s=r("60a3"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"960px"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),r("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{flat:""}},[r("v-card-text",{staticClass:"subheading px-0"},[e._v("Copyright © 2018 Andreas Huber Dönni")])],1)],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-btn",{staticClass:"ma-0",attrs:{href:"https://github.com/andreashuber69/"+e.packageName+"/blob/master/README.md#--",target:"_blank",color:"primary",block:"",flat:""}},[e._v("\n            Documentation\n          ")])],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-btn",{staticClass:"ma-0",attrs:{href:"https://github.com/andreashuber69/"+e.packageName+"/issues",target:"_blank",color:"primary",block:"",flat:""}},[e._v("\n            Issues\n          ")])],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-btn",{staticClass:"ma-0",attrs:{href:"https://raw.githubusercontent.com/andreashuber69/"+e.packageName+"/master/LICENSE",target:"_blank",color:"primary",block:"",flat:""}},[e._v("\n            License\n          ")])],1),r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{flat:""}},[r("v-card-text",{staticClass:"caption px-0"},[e._v(e._s(e.userAgent))])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.isOpen=!1}}},[e._v("Close")])],1)],1)],1)},u=[],l=r("9224"),d=function(){function e(){}return Object.defineProperty(e,"packageName",{get:function(){return l.name},enumerable:!0,configurable:!0}),Object.defineProperty(e,"title",{get:function(){return this.packageName.split("-").map(function(e){return""+e[0].toUpperCase()+e.substr(1)}).join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return l.version},enumerable:!0,configurable:!0}),e}(),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isOpen=!1,t}return a["c"](t,e),Object.defineProperty(t.prototype,"title",{get:function(){return d.title+" v"+d.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"packageName",{get:function(){return d.packageName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userAgent",{get:function(){return window.navigator.userAgent},enumerable:!0,configurable:!0}),t.prototype.showDialog=function(){this.isOpen=!0},t=a["b"]([s["a"]],t),t}(s["c"]),p=f,h=p,m=(r("6ee4"),r("2877")),y=r("6544"),v=r.n(y),b=r("8336"),g=r("b0af"),k=r("99d9"),w=r("12b2"),x=r("a523"),T=r("169a"),E=r("0e8f"),S=r("a722"),M=r("9910"),C=Object(m["a"])(h,c,u,!1,null,"1e2a732e",null);C.options.__file="AboutDialog.vue";var _=C.exports;v()(C,{VBtn:b["a"],VCard:g["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:w["a"],VContainer:x["a"],VDialog:T["a"],VFlex:E["a"],VLayout:S["a"],VSpacer:M["a"]});var P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-container",{attrs:{"grid-list-lg":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"YouTrack Base URL",hint:"Example: 'https://company.myjetbrains.com",required:"",autofocus:e.focusUrl,rules:e.rules,"error-messages":e.networkError},model:{value:e.checkedModel.youTrackBaseUrl,callback:function(t){e.$set(e.checkedModel,"youTrackBaseUrl",t)},expression:"checkedModel.youTrackBaseUrl"}})],1),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"YouTrack Authentication Token",hint:"Example: 'perm:QUhV.VGVzdDI=.6fRv9xZztORX9LquKaXJHxf5lsKyoO'",required:"",autofocus:e.focusToken,rules:e.rules,"error-messages":e.networkError,"append-icon":e.showToken?"visibility_off":"visibility",type:e.showToken?"text":"password"},on:{"click:append":function(t){e.showToken=!e.showToken}},model:{value:e.checkedModel.youTrackToken,callback:function(t){e.$set(e.checkedModel,"youTrackToken",t)},expression:"checkedModel.youTrackToken"}})],1),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{ref:"excelFileField",attrs:{label:"Excel File",required:"",readonly:"",disabled:e.disableFile,rules:e.rules,"error-messages":e.fileError,"append-icon":"open_in_browser"},on:{"click:append":e.onOpenClicked},model:{value:e.checkedModel.filename,callback:function(t){e.$set(e.checkedModel,"filename",t)},expression:"checkedModel.filename"}}),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:e.checkedModel.fileExtension},on:{change:e.onFileInputChanged}})],1),r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-title",[r("h3",{staticClass:"headline"},[e._v("Unreported Spent Time")])]),r("v-data-table",{attrs:{"no-data-text":e.noSpentTimeText,headers:e.timeHeaders,items:e.checkedModel.times,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.date.toLocaleDateString()))]),r("td",[e._v(e._s(t.item.title))]),r("td",[e._v(e._s(t.item.summary))]),r("td",[e._v(e._s(t.item.type))]),r("td",{staticStyle:{"white-space":"pre"}},[e._v(e._s(t.item.comment))]),r("td",{staticClass:"text-xs-right"},[e._v(e._s((t.item.durationMinutes/60).toFixed(2)+"h"))])]}}])})],1)],1),r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{attrs:{color:"primary",disabled:!e.valid||0===e.checkedModel.times.length},on:{click:e.onSubmitClicked}},[e._v("Report Now")])],1)],1)],1)],1),r("v-snackbar",{model:{value:e.showSuccess,callback:function(t){e.showSuccess=t},expression:"showSuccess"}},[e._v("Spent time reported successfully.")])],1)},I=[],O=r("1146"),D=function(){function e(e,t){var r,n,o,i;this.roundingMinutes=t,this.map=new Map;try{for(var s=a["g"](e),c=s.next();!c.done;c=s.next()){var u=c.value;this.addSingle(u)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}try{for(var l=a["g"](this.map.values()),d=l.next();!d.done;d=l.next()){u=d.value;this.roundDuration(u)}}catch(p){o={error:p}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}}return e.prototype.uniqueTitles=function(){return a["f"](new Set(a["f"](this.map.values()).map(function(e){return e.title})))},e.prototype.subtract=function(e){var t,r;try{for(var n=a["g"](e),o=n.next();!o.done;o=n.next()){var i=o.value;this.subtractSingle(i)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.entries=function(){var t,r,n=new Array;try{for(var o=a["g"](this.map.values()),i=o.next();!i.done;i=o.next()){var s=i.value;n.push(s)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n.sort(function(t,r){return e.compare(t,r)}),n},e.compare=function(e,t){return e.date.getTime()-t.date.getTime()||e.title.localeCompare(t.title)||(e.type||"").localeCompare(t.type||"")||0},e.prototype.addSingle=function(e){var t=a["e"](this.findExisting(e),2),r=t[0],n=t[1];n?(n.durationMinutes+=e.durationMinutes,e.comment&&(n.comment=n.comment?n.comment+"\n"+e.comment:e.comment)):this.map.set(r,e)},e.prototype.subtractSingle=function(e){var t=a["e"](this.findExisting(e),2),r=t[0],n=t[1];if(this.roundDuration(e),!n||n.durationMinutes<e.durationMinutes){var o=e.date.toLocaleDateString();throw new Error("Spent time entries for issue "+e.title+" on "+o+" cannot be matched to the Excel file.")}n.durationMinutes-=e.durationMinutes,0===n.durationMinutes&&this.map.delete(r)},e.prototype.findExisting=function(e){var t=e.date.getTime()+"|"+e.title+"|"+e.type;return[t,this.map.get(t)]},e.prototype.roundDuration=function(e){e.durationMinutes=Math.round(e.durationMinutes/this.roundingMinutes)*this.roundingMinutes},e}(),A=function(){function e(){}return e.parse=function(e){var t,r,n,o,i,s,c,u,l,d,f,p,h;return a["d"](this,function(m){switch(m.label){case 0:i=!1,m.label=1;case 1:m.trys.push([1,12,13,14]),s=a["g"](e.SheetNames),c=s.next(),m.label=2;case 2:if(c.done)return[3,11];u=c.value,m.label=3;case 3:m.trys.push([3,8,9,10]),l=a["g"](this.parseSheet(e.Sheets[u],u)),d=l.next(),m.label=4;case 4:return d.done?[3,7]:(f=d.value,i=!0,[4,f]);case 5:m.sent(),m.label=6;case 6:return d=l.next(),[3,4];case 7:return[3,10];case 8:return p=m.sent(),n={error:p},[3,10];case 9:try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}return[7];case 10:return c=s.next(),[3,2];case 11:return[3,14];case 12:return h=m.sent(),t={error:h},[3,14];case 13:try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}return[7];case 14:if(!i)throw new Error("The selected workbook does not seem to contain any Week sheets.");return[2]}})},e.parseSheet=function(e,t){var r,n,o,i,s,c,u,l,d,f,p,h,m,y,v;return a["d"](this,function(b){switch(b.label){case 0:if(!t.startsWith("Week"))return[3,8];if(o=e["!ref"],!o)throw new Error("The sheet "+t+" seems to be empty.");i=o.indexOf(":"),this.checkRange(i<0,t,o),s=a["e"](this.split(o.substring(0,i),t,o),2),c=s[0],u=s[1],l=a["e"](this.split(o.substring(i+1,o.length),t,o),2),d=l[0],f=l[1],p=5,this.checkRange("A"!==c||"G"!==d||1!==u||f<p,t,o),b.label=1;case 1:b.trys.push([1,6,7,8]),h=a["g"](this.iterateRows(p,f,t,e)),m=h.next(),b.label=2;case 2:return m.done?[3,5]:(y=m.value,[4,y]);case 3:b.sent(),b.label=4;case 4:return m=h.next(),[3,2];case 5:return[3,8];case 6:return v=b.sent(),r={error:v},[3,8];case 7:try{m&&!m.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}return[7];case 8:return[2]}})},e.checkRange=function(e,t,r){if(e)throw new Error("The sheet "+t+" has an unexpected range: "+r+".")},e.iterateRows=function(e,t,r,n){var o,i;return a["d"](this,function(a){switch(a.label){case 0:o=e,a.label=1;case 1:return o<=t?(i=this.parseRow({errorPrefix:"In sheet "+r+", ",row:o,holidays:n["A"+o],otherPaidAbsence:n["B"+o],start:n["C"+o],end:n["D"+o],title:n["E"+o],type:n["F"+o],comment:n["G"+o]}),i?[4,i]:[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return++o,[3,1];case 4:return[2]}})},e.parseRow=function(e){var t=this.getPeriod(e);if(t){var r=a["e"](t,2),n=r[0],o=r[1],i=this.getSpentTime(o,n,e),s=a["e"](this.getWorkDetail(e,n,o),2),c=s[0],u=s[1];if(void 0===n.f){if(!u)throw new Error(e.errorPrefix+"E"+e.row+" must not be empty.");if(u.includes("-"))return{date:this.toDate(n.v),title:u,type:e.type&&e.type.v.toString()||void 0,comment:e.comment&&e.comment.v.toString()||void 0,isPaidAbsence:c,durationMinutes:24*i*60}}}},e.split=function(e,t,r){var n=e.search("[0-9]+");return this.checkRange(n<0,t,r),[e.substring(0,n),Number.parseInt(e.substring(n,e.length),10)]},e.getPeriod=function(e){if(!e.start!==!e.end)throw new Error(e.errorPrefix+"C"+e.row+" and D"+e.row+" must either be both empty or non-empty.");if(e.start&&e.end){if("number"!==typeof e.start.v||"number"!==typeof e.end.v)throw new Error(e.errorPrefix+"C"+e.row+" and D"+e.row+" must both be dates.");return[{v:e.start.v,f:e.start.f},{v:e.end.v,f:e.end.f}]}},e.getSpentTime=function(e,t,r){var n=e.v-t.v;if(Math.abs(n)<1/24/60/60&&(n=0),n<0)throw new Error(r.errorPrefix+"C"+r.row+" must be smaller than D"+r.row+".");if(n>=1)throw new Error(r.errorPrefix+"on row "+r.row+" the spent time must be smaller than 1 day.");return n},e.getWorkDetail=function(e,t,r){if(e.holidays&&e.otherPaidAbsence)throw new Error(e.errorPrefix+"A"+e.row+" and B"+e.row+" cannot both be non-empty.");var n=!!e.holidays||!!e.otherPaidAbsence;if(n){if(void 0!==t.f||void 0===r.f)throw new Error(e.errorPrefix+"C"+e.row+" must be fixed and D"+e.row+" must be floating.");return[n,e.holidays?"Holiday":"Other Paid Absence"]}if(void 0===t.f!==(void 0===r.f))throw new Error(e.errorPrefix+"C"+e.row+" and D"+e.row+" must either be both values or both formulas.");return[n,e.title&&e.title.v&&e.title.v.toString()||void 0]},e.toDate=function(e){return new Date(24*Math.floor(this.excelEpochStart.getTime()/1e3/60/60/24+e)*60*60*1e3)},e.excelEpochStart=new Date(1899,11,30),e}(),V=function(){function e(e){this.spentTimes=new D(A.parse(Object(O["read"])(new Uint8Array(e),{type:"array"})),15)}return e.create=function(t){return a["a"](this,void 0,void 0,function(){var r;return a["d"](this,function(n){switch(n.label){case 0:return r=e.bind,[4,this.read(t)];case 1:return[2,new(r.apply(e,[void 0,n.sent()]))]}})})},e.prototype.subtractExistingSpentTimes=function(e){return a["a"](this,void 0,void 0,function(){var t,r,n,o,i,s,c,u,l,d,f,p;return a["d"](this,function(h){switch(h.label){case 0:return n=this.spentTimes.uniqueTitles(),s=(i=e).getWorkItemsForUser,[4,e.getCurrentUser()];case 1:return[4,s.apply(i,[h.sent(),n])];case 2:return o=h.sent(),this.subtractNewSpentTimes(o.values()),[4,e.getIssues(this.spentTimes.uniqueTitles())];case 3:c=h.sent(),u=this.spentTimes.entries(),l=function(e){var t=c.find(function(t){return t.id===e.title});e.summary=t&&t.summary};try{for(d=a["g"](u),f=d.next();!f.done;f=d.next())p=f.value,l(p)}catch(m){t={error:m}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return[2,u]}})})},e.prototype.subtractNewSpentTimes=function(t){return this.spentTimes.subtract(e.convert(t)),this.spentTimes.entries()},e.convert=function(e){var t,r,n,o,i,s;return a["d"](this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,7]),n=a["g"](e),o=n.next(),c.label=1;case 1:return o.done?[3,4]:(i=o.value,[4,{date:new Date(i.date),title:i.issue.id,type:i.type&&i.type.name||void 0,isPaidAbsence:!1,comment:i.text,durationMinutes:i.duration.minutes}]);case 2:c.sent(),c.label=3;case 3:return o=n.next(),[3,1];case 4:return[3,7];case 5:return s=c.sent(),t={error:s},[3,7];case 6:try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}return[7];case 7:return[2]}})},e.read=function(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(e){return t(n.result)},n.onerror=function(e){return r("Unable to read file.")},n.readAsArrayBuffer(e)})},e}(),j=function(){function e(e,t){this.baseUrl=e,this.authenticationToken=t,this.headersInit=new Headers([["Accept","application/json"],["Authorization","Bearer "+this.authenticationToken],["Cache-Control","no-cache"],["Content-Type","application/json"]])}return e.prototype.getCurrentUser=function(){return this.get("youtrack/api/admin/users/me")},e.prototype.getIssue=function(e){return a["a"](this,void 0,void 0,function(){var t,r;return a["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.get("youtrack/api/issues/"+e,[["fields","id,summary"]])];case 1:return t=n.sent(),t.id=e,[2,t];case 2:throw r=n.sent(),new Error('Failed to get issue id "'+e+'": '+(r instanceof Error&&r.message||r));case 3:return[2]}})})},e.prototype.getIssues=function(e){var t=this;return Promise.all(a["f"](e).map(function(e){return t.getIssue(e)}))},e.prototype.getWorkItems=function(t){return a["a"](this,void 0,void 0,function(){var r,n,o,i,s,c,u;return a["d"](this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.get(e.getWorkItemsPath(t),e.workItemsParams)];case 1:return o=l.sent(),[3,3];case 2:throw i=l.sent(),new Error('Failed to get work items for issue id "'+t+'": '+(i instanceof Error&&i.message||i));case 3:try{for(s=a["g"](o),c=s.next();!c.done;c=s.next())u=c.value,u.issue.id=t}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[2,o]}})})},e.prototype.getWorkItemsForUser=function(e,t){return a["a"](this,void 0,void 0,function(){var r,n,o=this;return a["d"](this,function(i){switch(i.label){case 0:return[4,Promise.all(a["f"](t).map(function(e){return o.getWorkItems(e)}))];case 1:return n=i.sent(),[2,(r=new Array).concat.apply(r,a["f"](n)).filter(function(t){return t.creator.id===e.id})]}})})},e.prototype.createWorkItem=function(t,r){return this.post(e.getWorkItemsPath(t),e.workItemsParams,r)},e.getWorkItemsPath=function(e){return"youtrack/api/issues/"+e+"/timeTracking/workItems"},e.prototype.get=function(e,t){return this.fetch(e,"GET",t)},e.prototype.post=function(e,t,r){return this.fetch(e,"POST",t,r)},e.prototype.fetch=function(e,t,r,n){return a["a"](this,void 0,void 0,function(){var o,i,s,c,u,l,d,f,p,h,m,y;return a["d"](this,function(v){switch(v.label){case 0:if(c=new URL(e,this.baseUrl),r)try{for(u=a["g"](r),l=u.next();!l.done;l=u.next())d=l.value,c.searchParams.append(d[0],d[1])}catch(b){o={error:b}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}v.label=1;case 1:return v.trys.push([1,3,,4]),[4,window.fetch(c.href,this.getInit(t,n))];case 2:return s=v.sent(),[3,4];case 3:throw f=v.sent(),new Error("Network Error: "+f);case 4:if(!s.ok)throw new Error("Response Status: "+s.status+" "+s.statusText);v.label=5;case 5:return v.trys.push([5,7,,8]),m=(h=JSON).parse,[4,s.text()];case 6:return p=m.apply(h,[v.sent()]),[3,8];case 7:throw y=v.sent(),new Error("Parse Failure: "+y);case 8:if(null===p)throw new Error("Unexpected null response.");return[2,p]}})})},e.prototype.getInit=function(e,t){return{method:e,headers:this.headersInit,body:JSON.stringify(t),mode:"cors"}},e.workItemsParams=[["fields","creator(id),date,duration(minutes),issue(id),text,type(name)"]],e}(),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.valid=!1,t.showToken=!1,t.rules=[function(e){return r.requiredRule(e)}],t.networkError=null,t.fileError=null,t.timeHeaders=[{text:"Date",sortable:!1},{text:"ID",sortable:!1},{text:"Summary",sortable:!1},{text:"Type",sortable:!1},{text:"Comment",sortable:!1},{text:"Spent Time",align:"right",sortable:!1}],t.noSpentTimeText="Upload your Excel file to see the unreported spent time.",t.showSuccess=!1,t}var r;return a["c"](t,e),r=t,Object.defineProperty(t.prototype,"focusUrl",{get:function(){return!this.checkedModel.youTrackBaseUrl},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusToken",{get:function(){return!this.focusUrl&&!this.checkedModel.youTrackToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableFile",{get:function(){return!this.checkedModel.youTrackBaseUrl||!this.checkedModel.youTrackToken},enumerable:!0,configurable:!0}),t.prototype.onOpenClicked=function(e){this.fileInput.click()},t.prototype.onFileInputChanged=function(e){return a["a"](this,void 0,void 0,function(){var t,r;return a["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,,2,3]),t=e.target&&e.target.files||void 0,r=this.checkedModel,[4,this.onFileInputChangedImpl(t)];case 1:return r.times=n.sent(),this.noSpentTimeText="The Excel file does not contain any unreported spent time.",[3,3];case 2:return this.fileInput.value="",[7];case 3:return[2]}})})},t.prototype.onSubmitClicked=function(e){return a["a"](this,void 0,void 0,function(){var e;return a["d"](this,function(t){switch(t.label){case 0:return e=this.createYouTrack(),[4,Promise.all(this.checkedModel.times.map(function(t){return r.createWorkItem(e,t)}))];case 1:return t.sent(),this.showSuccess=!0,[2]}})})},t.requiredRule=function(e){return!!e||"A value is required."},t.getErrorMessage=function(e){return e instanceof Error&&e.toString()||"Unknown Error!"},t.createWorkItem=function(e,t){return e.createWorkItem(t.title,{date:t.date.getTime(),duration:{minutes:t.durationMinutes},text:t.comment||void 0,type:t.type&&{name:t.type}||void 0})},Object.defineProperty(t.prototype,"checkedModel",{get:function(){if(!this.model)throw new Error("No model set!");return this.model},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"excelFileField",{get:function(){return this.$refs.excelFileField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileInput",{get:function(){return this.$refs.fileInput},enumerable:!0,configurable:!0}),t.prototype.createYouTrack=function(){if(!this.checkedModel.youTrackBaseUrl||!this.checkedModel.youTrackToken)throw new Error("YouTrack coordinates missing!");return new j(this.checkedModel.youTrackBaseUrl,this.checkedModel.youTrackToken)},t.prototype.onFileInputChangedImpl=function(e){return a["a"](this,void 0,void 0,function(){var t,n;return a["d"](this,function(o){switch(o.label){case 0:if(this.fileError=null,this.networkError=null,this.excelFileField.focus(),!e||1!==e.length)throw new Error("Single file expected.");this.checkedModel.filename=e[0].name,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,V.create(e[0])];case 2:return t=o.sent(),[3,4];case 3:return n=o.sent(),this.fileError=r.getErrorMessage(n),[2,[]];case 4:try{return[2,t.subtractExistingSpentTimes(this.createYouTrack())]}catch(i){return this.networkError=r.getErrorMessage(i),[2,[]]}return[2]}})})},a["b"]([Object(s["b"])()],t.prototype,"model",void 0),t=r=a["b"]([s["a"]],t),t}(s["c"]),F=U,B=F,L=(r("b318"),r("8fea")),R=r("4bd4"),N=r("2db4"),W=r("2677"),q=Object(m["a"])(B,P,I,!1,null,null,null);q.options.__file="Content.vue";var $=q.exports;v()(q,{VBtn:b["a"],VCard:g["a"],VCardTitle:w["a"],VContainer:x["a"],VDataTable:L["a"],VFlex:E["a"],VForm:R["a"],VLayout:S["a"],VSnackbar:N["a"],VTextField:W["a"]});var K=function(){function e(){this.fileExtension=".xlsm",this.filename=null,this.times=new Array,this.youTrackBaseUrlImpl=e.getLocalStorage(e.youTrackBaseUrlKey),this.youTrackTokenImpl=e.getLocalStorage(e.youTrackTokenKey)}return Object.defineProperty(e.prototype,"title",{get:function(){return d.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"youTrackBaseUrl",{get:function(){return this.youTrackBaseUrlImpl},set:function(t){this.youTrackBaseUrlImpl=t,e.setLocalStorage(e.youTrackBaseUrlKey,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"youTrackToken",{get:function(){return this.youTrackTokenImpl},set:function(t){this.youTrackTokenImpl=t,e.setLocalStorage(e.youTrackTokenKey,t)},enumerable:!0,configurable:!0}),e.getLocalStorage=function(e){return window.localStorage.getItem(e)},e.setLocalStorage=function(e,t){t?window.localStorage.setItem(e,t):window.localStorage.removeItem(e)},e.youTrackBaseUrlKey="youTrackBaseUrl",e.youTrackTokenKey="youTrackToken",e}(),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDrawerVisible=!1,t.model=new K,t}return a["c"](t,e),t.prototype.onMenuClicked=function(e){this.isDrawerVisible=!this.isDrawerVisible},t.prototype.onAboutClicked=function(e){this.isDrawerVisible=!1,this.$refs.aboutDialog.showDialog()},t=a["b"]([Object(s["a"])({components:{AboutDialog:_,Content:$}})],t),t}(s["c"]),Y=H,G=Y,J=r("7496"),z=r("549c"),Q=r("132d"),X=r("8860"),Z=r("ba95"),ee=r("40fe"),te=r("5d23"),re=r("f774"),ne=r("71d9"),oe=r("706c"),ie=r("2a7f"),ae=Object(m["a"])(G,o,i,!1,null,null,null);ae.options.__file="App.vue";var se=ae.exports;v()(ae,{VApp:J["a"],VContent:z["a"],VIcon:Q["a"],VList:X["a"],VListTile:Z["a"],VListTileAction:ee["a"],VListTileContent:te["a"],VListTileTitle:te["b"],VNavigationDrawer:re["a"],VSpacer:M["a"],VToolbar:ne["a"],VToolbarSideIcon:oe["a"],VToolbarTitle:ie["a"]});var ce=r("bb71");r("da64");n["default"].use(ce["a"],{iconfont:"md"}),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(se)}}).$mount("#app")},e8f4:function(e,t,r){}});
//# sourceMappingURL=app.da6313b5.js.map